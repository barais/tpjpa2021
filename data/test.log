/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
drop table if exists Commentaire CASCADE 
drop table if exists Label CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_Label CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Commentaire (id bigint not null, createdAt timestamp, updateAt timestamp, ticket_id bigint, utilisateur_id bigint, primary key (id))
create table Label (id bigint not null, couleur varchar(255), description varchar(255), nom varchar(255), primary key (id))
create table Ticket (id bigint not null, createdAt timestamp, etat integer, numero varchar(255), titre varchar(255), gestionnaire_id bigint, utilisateur_id bigint, primary key (id))
create table Ticket_Label (tickets_id bigint not null, labels_id bigint not null, primary key (tickets_id, labels_id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint not null, createdAt timestamp, nom varchar(255), password varchar(255), prenoms varchar(255), username varchar(255), role varchar(255), primary key (id))
alter table Label add constraint UK_r3cvs4stbomsv7niju0bqevgx unique (nom)
alter table Ticket add constraint UK_dxj6b29w8pr0nagqbrx8wyyss unique (numero)
alter table Commentaire add constraint FKma1ry2q314mgkv8q8u5lrafdl foreign key (ticket_id) references Ticket
alter table Commentaire add constraint FKb7i29ppss6dbhwjihif0x2sg6 foreign key (utilisateur_id) references Utilisateur
alter table Ticket add constraint FKr8i58e336w1y9051642jke1nk foreign key (gestionnaire_id) references Utilisateur
alter table Ticket add constraint FKlx6owqa2xjndkbo1ystv5rwkb foreign key (utilisateur_id) references Utilisateur
alter table Ticket_Label add constraint FKk5jw88n9c7hnc0ktgf7870bb3 foreign key (labels_id) references Label
alter table Ticket_Label add constraint FKmb428eyyg2avmk9knd7q7lpl4 foreign key (tickets_id) references Ticket
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
drop table if exists Commentaire CASCADE 
drop table if exists Label CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_Label CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Commentaire (id bigint not null, createdAt timestamp, updateAt timestamp, ticket_id bigint, utilisateur_id bigint, primary key (id))
create table Label (id bigint not null, couleur varchar(255), description varchar(255), nom varchar(255), primary key (id))
create table Ticket (id bigint not null, createdAt timestamp, etat integer, numero varchar(255), titre varchar(255), gestionnaire_id bigint, utilisateur_id bigint, primary key (id))
create table Ticket_Label (tickets_id bigint not null, labels_id bigint not null, primary key (tickets_id, labels_id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint not null, createdAt timestamp, nom varchar(255), password varchar(255), prenoms varchar(255), username varchar(255), role varchar(255), primary key (id))
alter table Label add constraint UK_r3cvs4stbomsv7niju0bqevgx unique (nom)
alter table Ticket add constraint UK_dxj6b29w8pr0nagqbrx8wyyss unique (numero)
alter table Commentaire add constraint FKma1ry2q314mgkv8q8u5lrafdl foreign key (ticket_id) references Ticket
alter table Commentaire add constraint FKb7i29ppss6dbhwjihif0x2sg6 foreign key (utilisateur_id) references Utilisateur
alter table Ticket add constraint FKr8i58e336w1y9051642jke1nk foreign key (gestionnaire_id) references Utilisateur
alter table Ticket add constraint FKlx6owqa2xjndkbo1ystv5rwkb foreign key (utilisateur_id) references Utilisateur
alter table Ticket_Label add constraint FKk5jw88n9c7hnc0ktgf7870bb3 foreign key (labels_id) references Label
alter table Ticket_Label add constraint FKmb428eyyg2avmk9knd7q7lpl4 foreign key (tickets_id) references Ticket
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
drop table if exists Commentaire CASCADE 
drop table if exists Label CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_Label CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Commentaire (id bigint not null, createdAt timestamp, updateAt timestamp, ticket_id bigint, utilisateur_id bigint, primary key (id))
create table Label (id bigint not null, couleur varchar(255), description varchar(255), nom varchar(255), primary key (id))
create table Ticket (id bigint not null, createdAt timestamp, etat integer, numero varchar(255), titre varchar(255), gestionnaire_id bigint, utilisateur_id bigint, primary key (id))
create table Ticket_Label (tickets_id bigint not null, labels_id bigint not null, primary key (tickets_id, labels_id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint not null, createdAt timestamp, nom varchar(255), password varchar(255), prenoms varchar(255), username varchar(255), role varchar(255), primary key (id))
alter table Label add constraint UK_r3cvs4stbomsv7niju0bqevgx unique (nom)
alter table Ticket add constraint UK_dxj6b29w8pr0nagqbrx8wyyss unique (numero)
alter table Commentaire add constraint FKma1ry2q314mgkv8q8u5lrafdl foreign key (ticket_id) references Ticket
alter table Commentaire add constraint FKb7i29ppss6dbhwjihif0x2sg6 foreign key (utilisateur_id) references Utilisateur
alter table Ticket add constraint FKr8i58e336w1y9051642jke1nk foreign key (gestionnaire_id) references Utilisateur
alter table Ticket add constraint FKlx6owqa2xjndkbo1ystv5rwkb foreign key (utilisateur_id) references Utilisateur
alter table Ticket_Label add constraint FKk5jw88n9c7hnc0ktgf7870bb3 foreign key (labels_id) references Label
alter table Ticket_Label add constraint FKmb428eyyg2avmk9knd7q7lpl4 foreign key (tickets_id) references Ticket
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
drop table if exists Commentaire CASCADE 
drop table if exists Label CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_Label CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Commentaire (id bigint not null, createdAt timestamp, updateAt timestamp, ticket_id bigint, utilisateur_id bigint, primary key (id))
create table Label (id bigint not null, couleur varchar(255), description varchar(255), nom varchar(255), primary key (id))
create table Ticket (id bigint not null, createdAt timestamp, etat integer, numero varchar(255), titre varchar(255), gestionnaire_id bigint, utilisateur_id bigint, primary key (id))
create table Ticket_Label (tickets_id bigint not null, labels_id bigint not null, primary key (tickets_id, labels_id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint not null, createdAt timestamp, nom varchar(255), password varchar(255), prenoms varchar(255), username varchar(255), role varchar(255), primary key (id))
alter table Label add constraint UK_r3cvs4stbomsv7niju0bqevgx unique (nom)
alter table Ticket add constraint UK_dxj6b29w8pr0nagqbrx8wyyss unique (numero)
alter table Commentaire add constraint FKma1ry2q314mgkv8q8u5lrafdl foreign key (ticket_id) references Ticket
alter table Commentaire add constraint FKb7i29ppss6dbhwjihif0x2sg6 foreign key (utilisateur_id) references Utilisateur
alter table Ticket add constraint FKr8i58e336w1y9051642jke1nk foreign key (gestionnaire_id) references Utilisateur
alter table Ticket add constraint FKlx6owqa2xjndkbo1ystv5rwkb foreign key (utilisateur_id) references Utilisateur
alter table Ticket_Label add constraint FKk5jw88n9c7hnc0ktgf7870bb3 foreign key (labels_id) references Label
alter table Ticket_Label add constraint FKmb428eyyg2avmk9knd7q7lpl4 foreign key (tickets_id) references Ticket
INSERT INTO UTILISATEUR VALUES('Utilisateur',1,'2023-02-03 11:40:19.672000','Dat\u00e9','12345','Arnaud','adate',NULL)
INSERT INTO TICKET VALUES(2,'2023-02-03 11:40:19.672000',0,'123','Ticket 1',NULL,NULL)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
drop table if exists Commentaire CASCADE 
drop table if exists Label CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_Label CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Commentaire (id bigint not null, createdAt timestamp, updateAt timestamp, ticket_id bigint, utilisateur_id bigint, primary key (id))
create table Label (id bigint not null, couleur varchar(255), description varchar(255), nom varchar(255), primary key (id))
create table Ticket (id bigint not null, createdAt timestamp, etat integer, numero varchar(255), titre varchar(255), gestionnaire_id bigint, utilisateur_id bigint, primary key (id))
create table Ticket_Label (tickets_id bigint not null, labels_id bigint not null, primary key (tickets_id, labels_id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint not null, createdAt timestamp, nom varchar(255), password varchar(255), prenoms varchar(255), username varchar(255), role varchar(255), primary key (id))
alter table Label add constraint UK_r3cvs4stbomsv7niju0bqevgx unique (nom)
alter table Ticket add constraint UK_dxj6b29w8pr0nagqbrx8wyyss unique (numero)
alter table Commentaire add constraint FKma1ry2q314mgkv8q8u5lrafdl foreign key (ticket_id) references Ticket
alter table Commentaire add constraint FKb7i29ppss6dbhwjihif0x2sg6 foreign key (utilisateur_id) references Utilisateur
alter table Ticket add constraint FKr8i58e336w1y9051642jke1nk foreign key (gestionnaire_id) references Utilisateur
alter table Ticket add constraint FKlx6owqa2xjndkbo1ystv5rwkb foreign key (utilisateur_id) references Utilisateur
alter table Ticket_Label add constraint FKk5jw88n9c7hnc0ktgf7870bb3 foreign key (labels_id) references Label
alter table Ticket_Label add constraint FKmb428eyyg2avmk9knd7q7lpl4 foreign key (tickets_id) references Ticket
INSERT INTO UTILISATEUR VALUES('Utilisateur',1,'2023-02-03 11:45:28.482000','Dat\u00e9','12345','Arnaud','adate',NULL)
INSERT INTO TICKET VALUES(2,'2023-02-03 11:45:28.482000',0,'123','Ticket 1',NULL,NULL)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
drop table if exists Commentaire CASCADE 
drop table if exists Label CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_Label CASCADE 
drop table if exists Utilisateur CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Commentaire (id bigint not null, createdAt timestamp, updateAt timestamp, ticket_id bigint, utilisateur_id bigint, primary key (id))
create table Label (id bigint not null, couleur varchar(255), description varchar(255), nom varchar(255), primary key (id))
create table Ticket (id bigint not null, createdAt timestamp, etat integer, numero varchar(255), titre varchar(255), gestionnaire_id bigint, utilisateur_id bigint, primary key (id))
create table Ticket_Label (tickets_id bigint not null, labels_id bigint not null, primary key (tickets_id, labels_id))
create table Utilisateur (DTYPE varchar(31) not null, id bigint not null, createdAt timestamp, nom varchar(255), password varchar(255), prenoms varchar(255), username varchar(255), role varchar(255), primary key (id))
alter table Label add constraint UK_r3cvs4stbomsv7niju0bqevgx unique (nom)
alter table Ticket add constraint UK_dxj6b29w8pr0nagqbrx8wyyss unique (numero)
alter table Commentaire add constraint FKma1ry2q314mgkv8q8u5lrafdl foreign key (ticket_id) references Ticket
alter table Commentaire add constraint FKb7i29ppss6dbhwjihif0x2sg6 foreign key (utilisateur_id) references Utilisateur
alter table Ticket add constraint FKr8i58e336w1y9051642jke1nk foreign key (gestionnaire_id) references Utilisateur
alter table Ticket add constraint FKlx6owqa2xjndkbo1ystv5rwkb foreign key (utilisateur_id) references Utilisateur
alter table Ticket_Label add constraint FKk5jw88n9c7hnc0ktgf7870bb3 foreign key (labels_id) references Label
alter table Ticket_Label add constraint FKmb428eyyg2avmk9knd7q7lpl4 foreign key (tickets_id) references Ticket
INSERT INTO UTILISATEUR VALUES('Utilisateur',1,'2023-02-03 11:47:11.931000','Dat\u00e9','12345','Arnaud','adate',NULL)
INSERT INTO TICKET VALUES(2,'2023-02-03 11:47:11.931000',0,'123','Ticket 1',NULL,NULL)
INSERT INTO LABEL VALUES(3,'#0000000','Les bugs','Bug')
INSERT INTO TICKET_LABEL VALUES(2,3)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
DISCONNECT
